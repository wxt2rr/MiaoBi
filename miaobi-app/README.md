# 妙笔 - 微信文章创作「副驾驶」

> 为「心流」创作而生，告别繁琐工作流

## 🎯 项目愿景

妙笔不仅仅是一个工具，它是一个独立、完整且宁静的创作空间——一个为创作者隔绝外界干扰的"庇护所"。帮助创作者进入并维持"心流"状态，专注于内容创作本身。

## ✨ 核心功能

### 已实现功能 ✅

1. **基础编辑器**
   - 基于 TipTap 的富文本编辑器
   - 实时字数统计
   - 自动保存功能

2. **AI 智能助手**
   - 斜杠命令系统 (`/续写`, `/总结`, `/生成标题`)
   - 流式 AI 响应
   - 幽灵文本显示 (Tab 接受，Esc 拒绝)

3. **实时预览系统**
   - 高保真微信效果预览
   - 实时同步更新
   - 微信兼容样式

4. **一键复制功能**
   - HTML 净化和格式转换
   - 微信编辑器完美兼容
   - 智能剪贴板操作

5. **设置管理**
   - OpenAI API 配置
   - 模型选择 (GPT-4o, GPT-4, GPT-3.5)
   - 温度调节
   - 本地存储设置

### 开发中功能 🚧

1. **气泡菜单** - 选中文本时的上下文操作
2. **AI 润色功能** - 语调调整、自定义提示
3. **主题样式系统** - 品牌身份管理
4. **本地存储系统** - IndexedDB 文章管理
5. **AI 配图功能** - 多模型支持
6. **错误处理系统** - 完善的用户反馈

## 🚀 快速开始

### 1. 环境准备

```bash
# 克隆项目
git clone <repository-url>
cd miaobi-app

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 2. 配置 AI 服务

1. 访问 http://localhost:3000
2. 点击右上角的设置按钮 ⚙️
3. 输入您的 OpenAI API Key
4. 选择合适的模型和参数

### 3. 开始创作

1. 在编辑器中开始写作
2. 输入 `/` 使用 AI 命令
3. 实时预览微信效果
4. 完成后点击"为微信复制"

## 🛠️ 技术架构

### 核心技术栈

- **前端框架**: Next.js 14 (App Router)
- **UI 组件**: shadcn/ui + Tailwind CSS
- **富文本编辑器**: TipTap
- **状态管理**: Zustand
- **AI 服务**: OpenAI API (流式响应)
- **HTML 净化**: DOMPurify
- **本地存储**: localStorage + IndexedDB

### 设计原则

1. **纯前端架构** - 零服务器成本，数据本地存储
2. **BYOK 模式** - 用户自带 API 密钥，保护隐私
3. **本地优先** - 所有数据存储在用户设备
4. **渐进增强** - 核心功能优先，高级功能逐步添加

## 📱 使用指南

### AI 命令系统

在编辑器中输入 `/` 可以使用以下 AI 命令：

- `/续写` - 基于上下文智能续写
- `/生成标题` - 为文章生成吸引人的标题
- `/总结` - 总结当前文章内容
- `/润色` - 优化选中的文字 (开发中)
- `/自定义` - 输入自定义 AI 指令 (开发中)

### 快捷键

- `Tab` - 接受 AI 建议
- `Esc` - 拒绝 AI 建议
- `Ctrl/Cmd + S` - 手动保存 (开发中)

### 复制到微信

1. 完成文章创作
2. 点击"为微信复制"按钮
3. 打开微信公众号后台
4. 直接粘贴 (Ctrl/Cmd + V)

## 🔧 开发指南

### 项目结构

```
src/
├── app/                 # Next.js App Router
├── components/          # React 组件
│   ├── editor/         # 编辑器相关组件
│   ├── preview/        # 预览相关组件
│   ├── settings/       # 设置相关组件
│   ├── welcome/        # 欢迎页面
│   └── ui/             # shadcn/ui 组件
├── hooks/              # 自定义 Hooks
├── services/           # 服务层 (AI、导出等)
├── stores/             # Zustand 状态管理
├── types/              # TypeScript 类型定义
└── utils/              # 工具函数
```

### 添加新功能

1. 在 `src/types/index.ts` 中定义类型
2. 在 `src/services/` 中实现业务逻辑
3. 在 `src/hooks/` 中创建 React Hook
4. 在 `src/components/` 中创建 UI 组件
5. 更新相关的 store 和路由

## 🎨 设计哲学

### 专注胜于功能
产品的每一个界面元素和交互流程，都旨在消除干扰，让用户的注意力始终聚焦于内容本身。

### 清晰与掌控
用户永远是创作的主导者。AI 是协作者，而非独裁者。所有 AI 生成的内容都是可编辑、可拒绝、可撤销的。

### 美学完整性
产品本身是一个设计精良、极简美观的应用，产出的内容也具备专业、优雅的质感。

## 📈 开发路线图

### V1.0 MVP (当前)
- [x] 基础编辑器
- [x] AI 写作助手
- [x] 实时预览
- [x] 一键复制
- [ ] 完善错误处理

### V1.1 增强版
- [ ] 气泡菜单
- [ ] AI 润色功能
- [ ] 主题样式系统
- [ ] 本地文章管理

### V2.0 完整版
- [ ] AI 配图功能
- [ ] 多模态内容转换
- [ ] 团队协作功能
- [ ] 高级分析功能

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 📄 许可证

MIT License

## 🙏 致谢

感谢以下开源项目：

- [Next.js](https://nextjs.org/) - React 框架
- [TipTap](https://tiptap.dev/) - 富文本编辑器
- [shadcn/ui](https://ui.shadcn.com/) - UI 组件库
- [Tailwind CSS](https://tailwindcss.com/) - CSS 框架
- [Zustand](https://github.com/pmndrs/zustand) - 状态管理

---

**让创作回归纯粹，让 AI 成为最好的副驾驶。** ✨
